<devtools-navbar></devtools-navbar>

<div class="container-fluid">
    <div class="row align-items-center">
        <div class="col text-center">
            <img class="img-thumbnail" id="img1" src="image-placeholder.png" alt="Preview Image">
        </div>
        <div class="col">
            <form name="classrating" method="post" id="form1">
                <h1>Category</h1>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="phototype" id="a1" value="environment">
                    <label class="form-check-label" for="a1">1 environment</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="phototype" id="a2" value="people">
                    <label class="form-check-label" for="a2">2 people</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="phototype" id="a3" value="object">
                    <label class="form-check-label" for="a3">3 object</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="phototype" id="a4" value="hybrid" checked>
                    <label class="form-check-label" for="a4">4 hybrid</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="phototype" id="a5" value="animal">
                    <label class="form-check-label" for="a5">5 animal</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="phototype" id="a6" value="food">
                    <label class="form-check-label" for="a6">6 food</label>
                </div>
                <h1 class="mt-3">Rating</h1>
                <div class="row align-items-center">
                    <div class="col-4">
                        <input class="custom-range" type="range" min="1" max="3" step="1" id="counter" name="rating" value="2">
                    </div>
                    <p class="col" id="ratingText">Average</p>
                </div>
                <h1 class="mt-3">Database Information</h1>
                <div class="form-group row">
                    <label for="photourl" class="col-sm-2 col-form-label">URL</label>
                    <div class="col-sm-10">
                        <input type="text" readonly class="form-control-plaintext" id="photourl" name="photourl" value="image/url/here">
                    </div>
                </div>
                <div class="form-group row">
                    <label for="photoid" class="col-sm-2 col-form-label">Image ID</label>
                    <div class="col-sm-10">
                        <input type="text" readonly class="form-control-plaintext" id="photoid" name="photoid" value="####">
                    </div>
                </div>
                <input class="btn btn-primary" type="submit">
            </form>
        </div>
    </div>
    <textarea class="d-none">
        <input value="<?php echo $url; ?>" name="photourl" size="100" readonly><br>
        <input value="<?php echo $id; ?>" name="photoid" size="100" readonly><br>
        <?php
        $mysqli = new mysqli("localhost", "root", "", "photodata");
        $res = $mysqli->query("SELECT * FROM table1 WHERE done=0 ORDER BY RAND() LIMIT 1;");
        $row = $res->fetch_assoc();
        $url = $row["url"];
        $urlen = str_replace('#', '%23', $url);
        $id = $row["id"];
        echo "<img src='$urlen' style='float: left;'>";
        ?>
        <?php
        if (isset($_POST["photoid"]) && isset($_POST["phototype"]) && isset($_POST["rating"])) {
            $postid = $_POST["photoid"];
            $posttype = $_POST["phototype"];
            $postrating = $_POST["rating"];
            echo "$postid, $posttype, $postrating<br>";
            if (!$mysqli->query("UPDATE table1 SET rating=$postrating, class='$posttype', done=1 WHERE id=$postid;")) {
                echo "update fail";
            } else {
                echo "update good";
            }
        }
        ?>
    </textarea>
</div>